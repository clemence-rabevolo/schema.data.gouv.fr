{"remainingRequest":"/home/geof/projects/refonte-schema/schema.data.gouv.fr/site/node_modules/babel-loader/lib/index.js??ref--3-1!/home/geof/projects/refonte-schema/schema.data.gouv.fr/site/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/geof/projects/refonte-schema/schema.data.gouv.fr/site/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/geof/projects/refonte-schema/schema.data.gouv.fr/site/site/.vuepress/theme/global-components/InventoryBase.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/geof/projects/refonte-schema/schema.data.gouv.fr/site/site/.vuepress/theme/global-components/InventoryBase.vue","mtime":1628086293276},{"path":"/home/geof/projects/refonte-schema/schema.data.gouv.fr/site/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/geof/projects/refonte-schema/schema.data.gouv.fr/site/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/geof/projects/refonte-schema/schema.data.gouv.fr/site/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/geof/projects/refonte-schema/schema.data.gouv.fr/site/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICIvaG9tZS9nZW9mL3Byb2plY3RzL3JlZm9udGUtc2NoZW1hL3NjaGVtYS5kYXRhLmdvdXYuZnIvc2l0ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICIvaG9tZS9nZW9mL3Byb2plY3RzL3JlZm9udGUtc2NoZW1hL3NjaGVtYS5kYXRhLmdvdXYuZnIvc2l0ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tICIvaG9tZS9nZW9mL3Byb2plY3RzL3JlZm9udGUtc2NoZW1hL3NjaGVtYS5kYXRhLmdvdXYuZnIvc2l0ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucGFyc2UtaW50LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnZhbHVlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5lbnRyaWVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zb21lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNvcnQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnNldC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgbW9tZW50IGZyb20gIm1vbWVudCI7CnZhciBtYXBwaW5nID0gewogIHR5cGU6IHsKICAgIGxhYmVsOiAiVHlwZSIsCiAgICBzb3VyY2U6ICJEb25uw6llcywgQVBJIG91IGNvZGUgc291cmNlIgogIH0sCiAgdGl0bGU6IHsKICAgIGxhYmVsOiAiVGl0cmUiLAogICAgc291cmNlOiAiRG9ubsOpZXMsIEFQSSwgQ29kZXMgc291cmNlcyBjb25jZXJuw6lzIiwKICAgIGZvcm1hdDogZnVuY3Rpb24gZm9ybWF0KGNlbGwsIHJvdykgewogICAgICByZXR1cm4gcm93LnJhdy5VUkwgPyAiPGEgaHJlZj1cIiIuY29uY2F0KHJvdy5yYXcuVVJMLCAiXCI+IikuY29uY2F0KGNlbGwsICI8L2E+IikgOiBjZWxsOwogICAgfQogIH0sCiAgb3JnYW5pemF0aW9uOiB7CiAgICBsYWJlbDogIk1pbmlzdMOocmUiLAogICAgc291cmNlOiAiTWluaXN0w6hyZSIKICB9LAogIHN0YXR1czogewogICAgbGFiZWw6ICJTdGF0dXQgZOKAmW91dmVydHVyZSIsCiAgICBzb3VyY2U6ICLDiXRhdCBkJ2F2YW5jZW1lbnQiLAogICAgZm9ybWF0OiBmdW5jdGlvbiBmb3JtYXQoY2VsbCwgcm93KSB7CiAgICAgIHJldHVybiAiPHNwYW4gY2xhc3M9XCJmci10YWcgIi5jb25jYXQocm93LnN0YXR1cy5fY2xhc3MsICJcIj4iKS5jb25jYXQoY2VsbC5sYWJlbCwgIjwvYT4iKTsKICAgIH0sCiAgICB3aWR0aDogIjEyZW0iCiAgfSwKICBkYXRlOiB7CiAgICBsYWJlbDogIkRhdGUgZXN0aW3DqWUgZGUgcHVibGljYXRpb24iLAogICAgc291cmNlOiAiw4ljaMOpYW5jZSBhbm5vbmPDqWUgcGFyIGxlcyBtaW5pc3TDqHJlcyIsCiAgICBmb3JtYXQ6IGZ1bmN0aW9uIGZvcm1hdChjZWxsLCByb3cpIHsKICAgICAgdmFyIGRhdGUgPSByb3cuZGF0ZTsKCiAgICAgIHZhciBfZGF0ZSRzcGxpdCA9IGRhdGUuc3BsaXQoIiAiKSwKICAgICAgICAgIF9kYXRlJHNwbGl0MiA9IF9zbGljZWRUb0FycmF5KF9kYXRlJHNwbGl0LCAyKSwKICAgICAgICAgIHRyaW1lc3RlciA9IF9kYXRlJHNwbGl0MlswXSwKICAgICAgICAgIHllYXIgPSBfZGF0ZSRzcGxpdDJbMV07CgogICAgICBpZiAocm93LnN0YXR1cy5rZXkgIT0gIm9wZW4iICYmIG1vbWVudCgpLnllYXIoKSA+PSBwYXJzZUludCh5ZWFyKSAmJiBtb21lbnQoKS5xdWFydGVyKCkgPiBwYXJzZUludCh0cmltZXN0ZXJbMV0pKSB7CiAgICAgICAgcmV0dXJuICJUIi5jb25jYXQobW9tZW50KCkucXVhcnRlcigpLCAiICIpLmNvbmNhdChtb21lbnQoKS55ZWFyKCkpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAiIi5jb25jYXQodHJpbWVzdGVyLCAiICIpLmNvbmNhdCh5ZWFyKTsKICAgICAgfQogICAgfQogIH0KfTsKdmFyIHN0YXR1c2VzID0gW3sKICBsYWJlbDogIkRpc3BvbmlibGUiLAogIGtleTogIm9wZW4iLAogIHZpc2libGU6IHRydWUsCiAgX2NsYXNzOiAiZ3JlZW4iLAogIGxhYmVsRXh0ZW5kZWQ6ICJkaXNwb25iaWxlcyIKfSwgewogIGxhYmVsOiAiUGxhbmlmacOpIiwKICBrZXk6ICJvcGVuaW5nIiwKICB2aXNpYmxlOiB0cnVlLAogIF9jbGFzczogInllbGxvdyIsCiAgbGFiZWxFeHRlbmRlZDogInBsYW5pZmnDqXMiCn0sIHsKICBsYWJlbDogIk5vbiBkaXNwb25pYmxlIiwKICBrZXk6ICJub3RvcGVuIiwKICB2aXNpYmxlOiB0cnVlLAogIF9jbGFzczogInJlZCIsCiAgbGFiZWxFeHRlbmRlZDogIm5vbiBkaXNwb25pYmxlcyIKfV07CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiSW52ZW50b3J5QmFzZSIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHN0YXR1c2VzOiBzdGF0dXNlcywKICAgICAgbG9hZGluZzogdHJ1ZSwKICAgICAgcXVlcnk6ICIiLAogICAgICBkYXRhc2V0czogW10sCiAgICAgIGxhc3RNb2RpZmllZDogbnVsbCwKICAgICAgbWFwcGluZzogbWFwcGluZywKICAgICAgY29sdW1uczogT2JqZWN0LnZhbHVlcyhPYmplY3QuZW50cmllcyhtYXBwaW5nKS5tYXAoZnVuY3Rpb24gKHIpIHsKICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZCh7CiAgICAgICAgICBrZXk6IHJbMF0KICAgICAgICB9LCByWzFdKTsKICAgICAgfSkpLAogICAgICBmaWx0ZXJzOiB7fQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBmaWx0ZXJlZERhdGFzZXRzOiBmdW5jdGlvbiBmaWx0ZXJlZERhdGFzZXRzKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGRhdGFzZXRzID0gdGhpcy5kYXRhc2V0cy5zbGljZSgpOwogICAgICBkYXRhc2V0cyA9IGRhdGFzZXRzLmZpbHRlcihmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiBkLnN0YXR1cy52aXNpYmxlID09IHRydWU7CiAgICAgIH0pLmZpbHRlcihmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiAhX3RoaXMuZmlsdGVycy50eXBlIHx8IGQudHlwZSA9PSBfdGhpcy5maWx0ZXJzLnR5cGU7CiAgICAgIH0pLmZpbHRlcihmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiAhX3RoaXMuZmlsdGVycy5zdGF0dXMgfHwgZC5zdGF0dXMubGFiZWwgPT0gX3RoaXMuZmlsdGVycy5zdGF0dXM7CiAgICAgIH0pLmZpbHRlcihmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiAhX3RoaXMuZmlsdGVycy5vcmcgfHwgZC5vcmdhbml6YXRpb24gPT0gX3RoaXMuZmlsdGVycy5vcmc7CiAgICAgIH0pLmZpbHRlcihmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiAhX3RoaXMuZmlsdGVycy50cmltZXN0ZXIgfHwgZC5kYXRlID09IF90aGlzLmZpbHRlcnMudHJpbWVzdGVyOwogICAgICB9KTsKICAgICAgaWYgKHRoaXMucXVlcnkubGVuZ3RoIDwgMykgcmV0dXJuIGRhdGFzZXRzOwogICAgICBkYXRhc2V0cyA9IGRhdGFzZXRzLmZpbHRlcihmdW5jdGlvbiAoZGF0YXNldCkgewogICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhtYXBwaW5nKS5zb21lKGZ1bmN0aW9uIChmaWVsZCkgewogICAgICAgICAgaWYgKCFkYXRhc2V0W2ZpZWxkXSB8fCAhZGF0YXNldFtmaWVsZF0udG9Mb3dlckNhc2UpIHJldHVybiBmYWxzZTsKICAgICAgICAgIHJldHVybiBkYXRhc2V0W2ZpZWxkXS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKF90aGlzLnF1ZXJ5LnRvTG93ZXJDYXNlKCkpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgcmV0dXJuIGRhdGFzZXRzOwogICAgfSwKICAgIGZpbHRlcmVkU29ydGVkRGF0YXNldHM6IGZ1bmN0aW9uIGZpbHRlcmVkU29ydGVkRGF0YXNldHMoKSB7CiAgICAgIHJldHVybiB0aGlzLmZpbHRlcmVkRGF0YXNldHMuc2xpY2UoKS5zb3J0KHRoaXMuY29tcGFyZVRyaW1lc3RlcnMpOwogICAgfSwKICAgIGNvdW50ZXJzOiBmdW5jdGlvbiBjb3VudGVycygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgY291bnQgPSB7CiAgICAgICAgY2xvc2VkOiAwLAogICAgICAgIG9wZW5pbmc6IDAsCiAgICAgICAgcHJldmlldzogMCwKICAgICAgICBvcGVuOiAwLAogICAgICAgIG5vdG9wZW46IDAKICAgICAgfTsKICAgICAgdGhpcy5maWx0ZXJlZERhdGFzZXRzLmZvckVhY2goZnVuY3Rpb24gKGRhdGFzZXQpIHsKICAgICAgICB2YXIgdmFsdWUgPSBkYXRhc2V0LnN0YXR1czsKCiAgICAgICAgdmFyIHN0YXR1cyA9IF90aGlzMi5zdGF0dXNlcy5maW5kKGZ1bmN0aW9uIChzKSB7CiAgICAgICAgICByZXR1cm4gcy5sYWJlbCA9PSB2YWx1ZTsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKHN0YXR1cykgewogICAgICAgICAgY291bnRbc3RhdHVzLmtleV0gKz0gMTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gY291bnQ7CiAgICB9LAogICAgb3JnYW5pemF0aW9uczogZnVuY3Rpb24gb3JnYW5pemF0aW9ucygpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB2YXIgb3JncyA9IHRoaXMuZGF0YXNldHMubWFwKGZ1bmN0aW9uIChkYXRhc2V0KSB7CiAgICAgICAgcmV0dXJuIGRhdGFzZXQub3JnYW5pemF0aW9uOwogICAgICB9KTsKICAgICAgb3JncyA9IF90b0NvbnN1bWFibGVBcnJheShuZXcgU2V0KG9yZ3MpKTsKICAgICAgb3JncyA9IG9yZ3MubWFwKGZ1bmN0aW9uIChvKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGxhYmVsOiBvLAogICAgICAgICAga2V5OiBvLAogICAgICAgICAgY291bnQ6IF90aGlzMy5maWx0ZXJlZERhdGFzZXRzLmZpbHRlcihmdW5jdGlvbiAoZCkgewogICAgICAgICAgICByZXR1cm4gZC5vcmdhbml6YXRpb24gPT0gbzsKICAgICAgICAgIH0pLmxlbmd0aAogICAgICAgIH07CiAgICAgIH0pOwogICAgICBvcmdzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICByZXR1cm4gYi5jb3VudCAtIGEuY291bnQ7CiAgICAgIH0pOwogICAgICByZXR1cm4gb3JnczsKICAgIH0sCiAgICB0cmltZXN0ZXJzOiBmdW5jdGlvbiB0cmltZXN0ZXJzKCkgewogICAgICB2YXIgdHJpbWVzdGVycyA9IF90b0NvbnN1bWFibGVBcnJheShuZXcgU2V0KHRoaXMuZGF0YXNldHMuc29ydCh0aGlzLmNvbXBhcmVUcmltZXN0ZXJzKS5tYXAoZnVuY3Rpb24gKGRhdGFzZXQpIHsKICAgICAgICByZXR1cm4gZGF0YXNldC5kYXRlOwogICAgICB9KSkpOwoKICAgICAgcmV0dXJuIHRyaW1lc3RlcnMubWFwKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGxhYmVsOiB0LAogICAgICAgICAga2V5OiB0CiAgICAgICAgfTsKICAgICAgfSk7CiAgICB9LAogICAgdHlwZXM6IGZ1bmN0aW9uIHR5cGVzKCkgewogICAgICB2YXIgdHlwZXMgPSBfdG9Db25zdW1hYmxlQXJyYXkobmV3IFNldCh0aGlzLmRhdGFzZXRzLm1hcChmdW5jdGlvbiAoZGF0YXNldCkgewogICAgICAgIHJldHVybiBkYXRhc2V0LnR5cGU7CiAgICAgIH0pKSk7CgogICAgICByZXR1cm4gdHlwZXMubWFwKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGxhYmVsOiB0LAogICAgICAgICAga2V5OiB0CiAgICAgICAgfTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkge30sCiAgbWV0aG9kczogewogICAgY29tcGFyZVRyaW1lc3RlcnM6IGZ1bmN0aW9uIGNvbXBhcmVUcmltZXN0ZXJzKGEsIGIpIHsKICAgICAgdmFyIHRhID0gYS5kYXRlLnNwbGl0KCIgIilbMV0gKyBhLmRhdGUuc3BsaXQoIiAiKVswXTsKICAgICAgdmFyIHRiID0gYi5kYXRlLnNwbGl0KCIgIilbMV0gKyBiLmRhdGUuc3BsaXQoIiAiKVswXTsKICAgICAgcmV0dXJuIHRhLmxvY2FsZUNvbXBhcmUodGIpOwogICAgfSwKICAgIHRvZ2dsZTogZnVuY3Rpb24gdG9nZ2xlKGJhZGdlKSB7CiAgICAgIHZhciBzdGF0dXMgPSB0aGlzLnN0YXR1c2VzLmZpbmQoZnVuY3Rpb24gKHMpIHsKICAgICAgICByZXR1cm4gcy5rZXkgPT0gYmFkZ2U7CiAgICAgIH0pOwogICAgICBzdGF0dXMudmlzaWJsZSA9ICFzdGF0dXMudmlzaWJsZTsKICAgIH0sCiAgICBmb3JtYXREYXRlOiBmdW5jdGlvbiBmb3JtYXREYXRlKHN0cikgewogICAgICByZXR1cm4gbW9tZW50KHN0cikuZm9ybWF0KCJERC9NTS9ZWVlZIik7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["InventoryBase.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <InventoryDataProxy\n      :mapping=\"mapping\"\n      :statuses=\"statuses\"\n      @input=\"\n        datasets = $event.datasets;\n        lastModified = $event.lastModified;\n      \"\n    />\n\n    <div v-if=\"datasets.length > 0\">\n      <InventoryFilter\n        v-model=\"filters\"\n        :types=\"types\"\n        :statuses=\"statuses\"\n        :trimesters=\"trimesters\"\n        :organizations=\"organizations\"\n      />\n\n      <InventoryTable :datasets=\"filteredSortedDatasets\" :columns=\"columns\" />\n\n      <p>Dernière modification : {{ formatDate(lastModified) }}</p>\n    </div>\n    <div v-else>\n      <em>Données en cours de chargement...</em>\n    </div>\n  </div>\n</template>\n\n<script>\nimport moment from \"moment\";\n\nconst mapping = {\n  type: {\n    label: \"Type\",\n    source: \"Données, API ou code source\",\n  },\n  title: {\n    label: \"Titre\",\n    source: \"Données, API, Codes sources concernés\",\n    format: (cell, row) =>\n      row.raw.URL ? `<a href=\"${row.raw.URL}\">${cell}</a>` : cell,\n  },\n  organization: {\n    label: \"Ministère\",\n    source: \"Ministère\",\n  },\n  status: {\n    label: \"Statut d’ouverture\",\n    source: \"État d'avancement\",\n    format: (cell, row) =>\n      `<span class=\"fr-tag ${row.status._class}\">${cell.label}</a>`,\n    width: \"12em\",\n  },\n  date: {\n    label: \"Date estimée de publication\",\n    source: \"Échéance annoncée par les ministères\",\n    format: (cell, row) => {\n      const date = row.date;\n      const [trimester, year] = date.split(\" \");\n\n      if (\n        row.status.key != \"open\" &&\n        moment().year() >= parseInt(year) &&\n        moment().quarter() > parseInt(trimester[1])\n      ) {\n        return `T${moment().quarter()} ${moment().year()}`;\n      } else {\n        return `${trimester} ${year}`;\n      }\n    },\n  },\n};\n\nconst statuses = [\n  {\n    label: \"Disponible\",\n    key: \"open\",\n    visible: true,\n    _class: \"green\",\n    labelExtended: \"disponbiles\",\n  },\n  {\n    label: \"Planifié\",\n    key: \"opening\",\n    visible: true,\n    _class: \"yellow\",\n    labelExtended: \"planifiés\",\n  },\n  {\n    label: \"Non disponible\",\n    key: \"notopen\",\n    visible: true,\n    _class: \"red\",\n    labelExtended: \"non disponibles\",\n  },\n];\n\nexport default {\n  name: \"InventoryBase\",\n  data() {\n    return {\n      statuses,\n      loading: true,\n      query: \"\",\n      datasets: [],\n      lastModified: null,\n      mapping,\n      columns: Object.values(\n        Object.entries(mapping).map((r) => ({ key: r[0], ...r[1] }))\n      ),\n      filters: {},\n    };\n  },\n  computed: {\n    filteredDatasets() {\n      let datasets = this.datasets.slice();\n\n      datasets = datasets\n        .filter((d) => d.status.visible == true)\n        .filter((d) => !this.filters.type || d.type == this.filters.type)\n        .filter(\n          (d) => !this.filters.status || d.status.label == this.filters.status\n        )\n        .filter((d) => !this.filters.org || d.organization == this.filters.org)\n        .filter(\n          (d) => !this.filters.trimester || d.date == this.filters.trimester\n        );\n\n      if (this.query.length < 3) return datasets;\n\n      datasets = datasets.filter((dataset) => {\n        return Object.keys(mapping).some((field) => {\n          if (!dataset[field] || !dataset[field].toLowerCase) return false;\n\n          return dataset[field]\n            .toLowerCase()\n            .includes(this.query.toLowerCase());\n        });\n      });\n\n      return datasets;\n    },\n    filteredSortedDatasets() {\n      return this.filteredDatasets.slice().sort(this.compareTrimesters);\n    },\n    counters() {\n      const count = {\n        closed: 0,\n        opening: 0,\n        preview: 0,\n        open: 0,\n        notopen: 0,\n      };\n      this.filteredDatasets.forEach((dataset) => {\n        const value = dataset.status;\n        const status = this.statuses.find((s) => s.label == value);\n        if (status) {\n          count[status.key] += 1;\n        }\n      });\n      return count;\n    },\n    organizations() {\n      let orgs = this.datasets.map((dataset) => dataset.organization);\n      orgs = [...new Set(orgs)];\n      orgs = orgs.map((o) => ({\n        label: o,\n        key: o,\n        count: this.filteredDatasets.filter((d) => d.organization == o).length,\n      }));\n      orgs.sort((a, b) => b.count - a.count);\n      return orgs;\n    },\n    trimesters() {\n      const trimesters = [\n        ...new Set(\n          this.datasets\n            .sort(this.compareTrimesters)\n            .map((dataset) => dataset.date)\n        ),\n      ];\n      return trimesters.map((t) => ({ label: t, key: t }));\n    },\n    types() {\n      const types = [...new Set(this.datasets.map((dataset) => dataset.type))];\n      return types.map((t) => ({ label: t, key: t }));\n    },\n  },\n  mounted() {},\n  methods: {\n    compareTrimesters(a, b) {\n      const ta = a.date.split(\" \")[1] + a.date.split(\" \")[0];\n      const tb = b.date.split(\" \")[1] + b.date.split(\" \")[0];\n      return ta.localeCompare(tb);\n    },\n    toggle(badge) {\n      const status = this.statuses.find((s) => s.key == badge);\n      status.visible = !status.visible;\n    },\n    formatDate(str) {\n      return moment(str).format(\"DD/MM/YYYY\");\n    },\n  },\n};\n</script>\n\n<style>\n.fr-tag.green {\n  background-color: #00ac8c;\n  color: white;\n}\n.fr-tag.yellow {\n  background-color: #fdcf41;\n}\n.fr-tag.red {\n  background-color: #ff6f4c;\n}\n</style>\n"],"sourceRoot":"site/.vuepress/theme/global-components"}]}