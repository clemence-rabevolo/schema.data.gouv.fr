{"remainingRequest":"/home/geof/projects/refonte-schema/schema.data.gouv.fr/site/node_modules/babel-loader/lib/index.js??ref--3-1!/home/geof/projects/refonte-schema/schema.data.gouv.fr/site/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/geof/projects/refonte-schema/schema.data.gouv.fr/site/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/geof/projects/refonte-schema/schema.data.gouv.fr/site/site/.vuepress/theme/global-components/InventoryDataProxy.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/geof/projects/refonte-schema/schema.data.gouv.fr/site/site/.vuepress/theme/global-components/InventoryDataProxy.vue","mtime":1628086293279},{"path":"/home/geof/projects/refonte-schema/schema.data.gouv.fr/site/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/geof/projects/refonte-schema/schema.data.gouv.fr/site/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/geof/projects/refonte-schema/schema.data.gouv.fr/site/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/geof/projects/refonte-schema/schema.data.gouv.fr/site/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIi9ob21lL2dlb2YvcHJvamVjdHMvcmVmb250ZS1zY2hlbWEvc2NoZW1hLmRhdGEuZ291di5mci9zaXRlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29ydC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5lbnRyaWVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7Ci8vCi8vCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiSW52ZW50b3J5RGF0YVByb3h5IiwKICBwcm9wczogWyJtYXBwaW5nIiwgInN0YXR1c2VzIl0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgYXhpb3MuZ2V0KCIiLmNvbmNhdCh0aGlzLiR0aGVtZUNvbmZpZy5hcGlVcmwsICIvaW52ZW50YWlyZSIpKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgdmFyIGRhdGFzZXRzID0gX3RoaXMudHJhbmZvcm1SZWNvcmRzKHJlcy5kYXRhLnJlY29yZHMpOwoKICAgICAgdmFyIGxhc3RNb2RpZmllZCA9IHJlcy5kYXRhLnJlY29yZHMubWFwKGZ1bmN0aW9uIChyKSB7CiAgICAgICAgcmV0dXJuIHIuZmllbGRzWyJMYXN0IE1vZGlmaWVkIl07CiAgICAgIH0pLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICByZXR1cm4gYi5sb2NhbGVDb21wYXJlKGEpOwogICAgICB9KVswXTsgLy8gVW4gcGV1IHNhbGUgbWFpcyDDqXZpdGUgZCdlbWJhcnF1ZXIgbG9kYXNoIG91IGF1dHJlCgogICAgICBfdGhpcy4kZW1pdCgiaW5wdXQiLCB7CiAgICAgICAgZGF0YXNldHM6IGRhdGFzZXRzLAogICAgICAgIGxhc3RNb2RpZmllZDogbGFzdE1vZGlmaWVkCiAgICAgIH0pOwogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICB0cmFuZm9ybVJlY29yZHM6IGZ1bmN0aW9uIHRyYW5mb3JtUmVjb3JkcyhyZWNvcmRzKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmV0dXJuIHJlY29yZHMubWFwKGZ1bmN0aW9uIChyZWNvcmQpIHsKICAgICAgICB2YXIgcm93ID0ge307CiAgICAgICAgT2JqZWN0LmVudHJpZXMoX3RoaXMyLm1hcHBpbmcpLmZvckVhY2goZnVuY3Rpb24gKF9yZWYpIHsKICAgICAgICAgIHZhciBfcmVmMiA9IF9zbGljZWRUb0FycmF5KF9yZWYsIDIpLAogICAgICAgICAgICAgIGtleSA9IF9yZWYyWzBdLAogICAgICAgICAgICAgIGluZm8gPSBfcmVmMlsxXTsKCiAgICAgICAgICByb3dba2V5XSA9IHJlY29yZC5maWVsZHNbaW5mby5zb3VyY2VdOwogICAgICAgIH0pOwogICAgICAgIHJvdy5yYXcgPSByZWNvcmQuZmllbGRzOwogICAgICAgIHJvdy5zdGF0dXMgPSBfdGhpczIuc3RhdHVzZXMuZmluZChmdW5jdGlvbiAocykgewogICAgICAgICAgcmV0dXJuIHMubGFiZWwgPT0gcm93LnN0YXR1czsKICAgICAgICB9KTsKICAgICAgICByb3cudmlzaWJsZSA9IHRydWU7CiAgICAgICAgcmV0dXJuIHJvdzsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["InventoryDataProxy.vue"],"names":[],"mappings":";;;;;;;;;AAGA,OAAA,KAAA,MAAA,OAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,oBADA;AAEA,EAAA,KAAA,EAAA,CAAA,SAAA,EAAA,UAAA,CAFA;AAGA,EAAA,OAHA,qBAGA;AAAA;;AACA,IAAA,KAAA,CAAA,GAAA,WAAA,KAAA,YAAA,CAAA,MAAA,kBAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,UAAA,QAAA,GAAA,KAAA,CAAA,eAAA,CAAA,GAAA,CAAA,IAAA,CAAA,OAAA,CAAA;;AAEA,UAAA,YAAA,GAAA,GAAA,CAAA,IAAA,CAAA,OAAA,CACA,GADA,CACA,UAAA,CAAA;AAAA,eAAA,CAAA,CAAA,MAAA,CAAA,eAAA,CAAA;AAAA,OADA,EAEA,IAFA,CAEA,UAAA,CAAA,EAAA,CAAA;AAAA,eAAA,CAAA,CAAA,aAAA,CAAA,CAAA,CAAA;AAAA,OAFA,EAEA,CAFA,CAAA,CAHA,CAKA;;AACA,MAAA,KAAA,CAAA,KAAA,CAAA,OAAA,EAAA;AAAA,QAAA,QAAA,EAAA,QAAA;AAAA,QAAA,YAAA,EAAA;AAAA,OAAA;AACA,KAPA;AAQA,GAZA;AAaA,EAAA,OAAA,EAAA;AACA,IAAA,eADA,2BACA,OADA,EACA;AAAA;;AACA,aAAA,OAAA,CAAA,GAAA,CAAA,UAAA,MAAA,EAAA;AACA,YAAA,GAAA,GAAA,EAAA;AAEA,QAAA,MAAA,CAAA,OAAA,CAAA,MAAA,CAAA,OAAA,EAAA,OAAA,CAAA,gBAAA;AAAA;AAAA,cAAA,GAAA;AAAA,cAAA,IAAA;;AACA,UAAA,GAAA,CAAA,GAAA,CAAA,GAAA,MAAA,CAAA,MAAA,CAAA,IAAA,CAAA,MAAA,CAAA;AACA,SAFA;AAIA,QAAA,GAAA,CAAA,GAAA,GAAA,MAAA,CAAA,MAAA;AACA,QAAA,GAAA,CAAA,MAAA,GAAA,MAAA,CAAA,QAAA,CAAA,IAAA,CAAA,UAAA,CAAA;AAAA,iBAAA,CAAA,CAAA,KAAA,IAAA,GAAA,CAAA,MAAA;AAAA,SAAA,CAAA;AACA,QAAA,GAAA,CAAA,OAAA,GAAA,IAAA;AAEA,eAAA,GAAA;AACA,OAZA,CAAA;AAaA;AAfA;AAbA,CAAA","sourcesContent":["<template />\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  name: \"InventoryDataProxy\",\n  props: [\"mapping\", \"statuses\"],\n  mounted() {\n    axios.get(`${this.$themeConfig.apiUrl}/inventaire`).then((res) => {\n      const datasets = this.tranformRecords(res.data.records);\n\n      const lastModified = res.data.records\n        .map((r) => r.fields[\"Last Modified\"])\n        .sort((a, b) => b.localeCompare(a))[0]; // Un peu sale mais Ã©vite d'embarquer lodash ou autre\n      this.$emit(\"input\", { datasets, lastModified });\n    });\n  },\n  methods: {\n    tranformRecords(records) {\n      return records.map((record) => {\n        const row = {};\n\n        Object.entries(this.mapping).forEach(([key, info]) => {\n          row[key] = record.fields[info.source];\n        });\n\n        row.raw = record.fields;\n        row.status = this.statuses.find((s) => s.label == row.status);\n        row.visible = true;\n\n        return row;\n      });\n    },\n  },\n};\n</script>\n"],"sourceRoot":"site/.vuepress/theme/global-components"}]}