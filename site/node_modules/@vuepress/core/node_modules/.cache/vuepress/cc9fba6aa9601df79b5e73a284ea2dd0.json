{"remainingRequest":"/home/geof/projects/refonte-schema/schema.data.gouv.fr/site/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/geof/projects/refonte-schema/schema.data.gouv.fr/site/site/.vuepress/theme/global-components/MenuSchema.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/geof/projects/refonte-schema/schema.data.gouv.fr/site/site/.vuepress/theme/global-components/MenuSchema.vue","mtime":1628180837131},{"path":"/home/geof/projects/refonte-schema/schema.data.gouv.fr/site/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/geof/projects/refonte-schema/schema.data.gouv.fr/site/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/geof/projects/refonte-schema/schema.data.gouv.fr/site/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/geof/projects/refonte-schema/schema.data.gouv.fr/site/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIk1lbnVTY2hlbWEiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICAgIHNjaGVtYV9pbmZvczogbnVsbCwKICAgICAgICBzY2hlbWE6IG51bGwsCiAgICAgICAgdmVyc2lvbjogbnVsbCwKICAgICAgICBvcHRpb25TZWxlY3Q6IG51bGwsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICB9LAogIG1vdW50ZWQoKSB7CiAgICAgIGNvbnN0IHNpID0gcmVxdWlyZSgnLi4vLi4vcHVibGljL3NjaGVtYS1pbmZvcy5qc29uJyk7CiAgICAgIHRoaXMuc2NoZW1hID0gdGhpcy4kcm91dGVyLmN1cnJlbnRSb3V0ZS5wYXRoLnNwbGl0KCcvJylbMl0rIi8iK3RoaXMuJHJvdXRlci5jdXJyZW50Um91dGUucGF0aC5zcGxpdCgnLycpWzNdCiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHNpKSkgewogICAgICAgIGlmKGtleSA9PSB0aGlzLnNjaGVtYSkgewogICAgICAgICAgICB0aGlzLnNjaGVtYV9pbmZvcyA9IHZhbHVlOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAodGhpcy4kcm91dGVyLmN1cnJlbnRSb3V0ZS5wYXRoLnNwbGl0KCcvJykubGVuZ3RoID4gNSkgewogICAgICAgICAgdGhpcy52ZXJzaW9uID0gdGhpcy4kcm91dGVyLmN1cnJlbnRSb3V0ZS5wYXRoLnNwbGl0KCcvJylbNF0KICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMudmVyc2lvbiA9IHRoaXMuc2NoZW1hX2luZm9zWydsYXRlc3QnXQogICAgICB9CiAgICAgIHRoaXMub3B0aW9uU2VsZWN0ID0gdGhpcy52ZXJzaW9uCiAgfSwKICBtZXRob2RzOiB7CiAgICAgIGdvdG9JbnRlcm5hbChwYWdlKXsKICAgICAgICAgIGxldCBsaW5rID0gJy9zY2hlbWFzLycrdGhpcy5zY2hlbWErJy8nK3RoaXMudmVyc2lvbisnLycrcGFnZQogICAgICAgICAgaWYgKHRoaXMuJHJvdXRlci5jdXJyZW50Um91dGUucGF0aCAhPT0gbGluaykgdGhpcy4kcm91dGVyLnB1c2gobGluaykKICAgICAgfSwKICAgICAgZ290b1NjaGVtYSgpewogICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gd2luZG93LmxvY2F0aW9uLm9yaWdpbiArIHRoaXMuc2NoZW1hX2luZm9zWyd2ZXJzaW9ucyddW3RoaXMudmVyc2lvbl1bJ3NjaGVtYV91cmwnXQogICAgICB9LAogICAgICBnb3RvRXh0ZXJuYWxMaW5rKGxpbmspewogICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gbGluawogICAgICB9LAogICAgICBjaGFuZ2VWZXJzaW9uKCl7CiAgICAgICAgICBsZXQgbGluayA9ICcvc2NoZW1hcy8nK3RoaXMuc2NoZW1hKycvJyt0aGlzLm9wdGlvblNlbGVjdCsnLycKICAgICAgICAgIGlmICh0aGlzLiRyb3V0ZXIuY3VycmVudFJvdXRlLnBhdGggIT09IGxpbmspIHRoaXMuJHJvdXRlci5wdXNoKGxpbmspCiAgICAgIH0KICB9LAp9Owo="},{"version":3,"sources":["MenuSchema.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MenuSchema.vue","sourceRoot":"site/.vuepress/theme/global-components","sourcesContent":["<template>\n  <div>\n      <div v-if=\"schema_infos && version\">\n        <div class=\"boxes\">\n            <div class=\"box-left\">\n                Version du schéma :\n                <select class=\"fr-select-custom\" @change=\"changeVersion()\" v-model=\"optionSelect\" >\n                    <option :selected=\"version == key\" v-for=\"(value, key) in schema_infos.versions\" v-bind:key=\"key\" :value=\"key\">{{ key }}</option>\n                </select>\n            </div>\n            <div class=\"box-right\">\n                <button \n                    @click=\"gotoInternal('')\" \n                    class=\"fr-btn fr-btn--secondary\"\n                >\n                    <img src=\"../../public/assets/info.png\" width=\"15\" />&nbsp;\n                    Infos\n                </button>\n                <button \n                    @click=\"gotoSchema()\" \n                    class=\"fr-btn fr-btn--secondary\"\n                >\n                    <img src=\"../../public/assets/structure-moleculaire.png\" width=\"15\" />&nbsp;\n                    Schéma\n                </button>\n                <button \n                    @click=\"gotoExternalLink(schema_infos['homepage'])\" \n                    class=\"fr-btn fr-btn--secondary\"\n                >\n                    <img src=\"../../public/assets/valider-git.png\" width=\"15\" />&nbsp;\n                    Git\n                </button>\n                <span v-if=\"schema_infos['versions'][version]['pages'].includes('CHANGELOG.md')\">\n                    <button \n                        @click=\"gotoInternal('CHANGELOG.html')\"\n                        class=\"fr-btn fr-btn--secondary\"\n                    >\n                        <img src=\"../../public/assets/couple-de-fleches-changeant-de-place.png\" width=\"15\" />&nbsp;\n                        Changements\n                    </button>\n                </span>\n            </div>\n        </div>\n        <br /><br />\n        <span v-if=\"schema_infos['versions'][version]['pages'].includes('documentation.md')\">\n            <button \n                class=\"fr-btn\"\n                @click=\"gotoInternal('documentation.html')\"\n            >\n                <img src=\"../../public/assets/file.png\" width=\"15\" />&nbsp;\n                Lire la documentation\n            </button>\n        </span>\n        <span v-if=\"schema_infos['external_doc']\">\n            <button\n                class=\"fr-btn\"\n                @click=\"gotoExternalLink(schema_infos['external_doc'])\"\n            >\n                <img src=\"../../public/assets/file.png\" width=\"15\" />&nbsp;\n                Documentation externe\n            </button>\n        </span>\n        <span v-if=\"schema_infos['external_tool']\">\n            <button \n                class=\"fr-btn\"\n                @click=\"gotoExternalLink(schema_infos['external_tool'])\"\n            >\n                <img src=\"../../public/assets/pencil.png\" width=\"15\" />&nbsp;\n                Saisir des données\n            </button>\n        </span>\n        <span v-if=\"schema && schema_infos['type'] == 'tableschema'\">\n            <button\n                class=\"fr-btn\"\n                @click=\"gotoExternalLink('https://publier.etalab.studio/select?schema='+schema)\"\n            >\n                <img src=\"../../public/assets/pencil.png\" width=\"15\" />&nbsp;\n                Saisir des données\n            </button>\n        </span>\n        <span v-if=\"schema && schema_infos['type'] == 'tableschema'\">\n            <button \n                class=\"fr-btn\"\n                @click=\"gotoExternalLink('https://publier.etalab.studio/upload?schema='+schema)\"\n            >\n                <img src=\"../../public/assets/checked-box.png\" width=\"15\" />&nbsp;\n                Valider mes données\n            </button>\n        </span>\n      </div>\n      <br />\n      <br />\n  </div>\n</template>\n\n<script>\n\nexport default {\n  name: \"MenuSchema\",\n  data() {\n    return {\n        schema_infos: null,\n        schema: null,\n        version: null,\n        optionSelect: null,\n    };\n  },\n  computed: {\n  },\n  mounted() {\n      const si = require('../../public/schema-infos.json');\n      this.schema = this.$router.currentRoute.path.split('/')[2]+\"/\"+this.$router.currentRoute.path.split('/')[3]\n      for (const [key, value] of Object.entries(si)) {\n        if(key == this.schema) {\n            this.schema_infos = value;\n        }\n      }\n      if (this.$router.currentRoute.path.split('/').length > 5) {\n          this.version = this.$router.currentRoute.path.split('/')[4]\n      } else {\n          this.version = this.schema_infos['latest']\n      }\n      this.optionSelect = this.version\n  },\n  methods: {\n      gotoInternal(page){\n          let link = '/schemas/'+this.schema+'/'+this.version+'/'+page\n          if (this.$router.currentRoute.path !== link) this.$router.push(link)\n      },\n      gotoSchema(){\n        window.location.href = window.location.origin + this.schema_infos['versions'][this.version]['schema_url']\n      },\n      gotoExternalLink(link){\n        window.location.href = link\n      },\n      changeVersion(){\n          let link = '/schemas/'+this.schema+'/'+this.optionSelect+'/'\n          if (this.$router.currentRoute.path !== link) this.$router.push(link)\n      }\n  },\n};\n</script>\n\n<style>\n\n.boxes{\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: center;\n  margin-top: 30px;\n}\n\n.box-left{\n  width: 50%;\n  font-size: 20px;\n  text-align: left;\n  line-height: 40px;\n}\n.box-right{\n  width: 50%;\n  text-align: right;\n}\n\n.fr-select-custom{\n    color: var(--g800);\n    background-color: var(--g200);\n    box-shadow: inset 0 -2px 0 0 var(--g600);\n    border: 0px;\n    width: 100px;\n    height: 40px;\n    font-size: 18px;\n    margin-left: 20px;\n}\n\n</style>\n"]}]}