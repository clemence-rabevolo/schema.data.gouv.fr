{"remainingRequest":"/home/geof/projects/refonte-schema/schema.data.gouv.fr/site/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/geof/projects/refonte-schema/schema.data.gouv.fr/site/site/.vuepress/theme/global-components/InventoryDataAirtable.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/geof/projects/refonte-schema/schema.data.gouv.fr/site/site/.vuepress/theme/global-components/InventoryDataAirtable.vue","mtime":1628086293277},{"path":"/home/geof/projects/refonte-schema/schema.data.gouv.fr/site/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/geof/projects/refonte-schema/schema.data.gouv.fr/site/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/geof/projects/refonte-schema/schema.data.gouv.fr/site/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/geof/projects/refonte-schema/schema.data.gouv.fr/site/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkludmVudG9yeURhdGFBaXJ0YWJsZSIsCiAgcHJvcHM6IFsiZmllbGRzIiwgInN0YXR1c2VzIl0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGFwaTogImh0dHBzOi8vYXBpLmFpcnRhYmxlLmNvbS92MC8iLAogICAgICBiYXNlOiAiYXBwSVNRcWZ2UlBNZzZDSDMvU3VpdmkiLAogICAgICBrZXk6ICIiLAogICAgfTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICBheGlvcyh7CiAgICAgIHVybDogYCR7dGhpcy5hcGl9JHt0aGlzLmJhc2V9YCwKICAgICAgaGVhZGVyczogewogICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLmtleX1gLAogICAgICB9LAogICAgfSkudGhlbigocmVzKSA9PiB7CiAgICAgIGNvbnN0IGRhdGFzZXRzID0gdGhpcy50cmFuZm9ybVJlY29yZHMocmVzLmRhdGEucmVjb3Jkcyk7CiAgICAgIHRoaXMuJGVtaXQoImlucHV0IiwgZGF0YXNldHMpOwogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICB0cmFuZm9ybVJlY29yZHMocmVjb3JkcykgewogICAgICBjb25zdCBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gcmVjb3Jkcy5tYXAoKHJlY29yZCkgPT4gewogICAgICAgIGNvbnN0IHJvdyA9IHt9OwoKICAgICAgICBPYmplY3QuZW50cmllcyh0aGlzLmZpZWxkcykuZm9yRWFjaCgoW2ZpZWxkLCBjb2x1bW5dKSA9PiB7CiAgICAgICAgICByb3dbY29sdW1uXSA9IHJlY29yZC5maWVsZHNbZmllbGRdOwogICAgICAgIH0pOwoKICAgICAgICByb3cucmF3ID0gcmVjb3JkLmZpZWxkczsKICAgICAgICByb3cuc3RhdHVzID0gdGhpcy5zdGF0dXNlcy5maW5kKAogICAgICAgICAgKHMpID0+IHMubGFiZWwgPT0gcm93WyJTdGF0dXQgZOKAmW91dmVydHVyZSJdCiAgICAgICAgKTsKICAgICAgICByb3cudmlzaWJsZSA9IHRydWU7CgogICAgICAgIHJldHVybiByb3c7CiAgICAgIH0pOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["InventoryDataAirtable.vue"],"names":[],"mappings":";;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"InventoryDataAirtable.vue","sourceRoot":"site/.vuepress/theme/global-components","sourcesContent":["<template />\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  name: \"InventoryDataAirtable\",\n  props: [\"fields\", \"statuses\"],\n  data() {\n    return {\n      api: \"https://api.airtable.com/v0/\",\n      base: \"appISQqfvRPMg6CH3/Suivi\",\n      key: \"\",\n    };\n  },\n  mounted() {\n    axios({\n      url: `${this.api}${this.base}`,\n      headers: {\n        Authorization: `Bearer ${this.key}`,\n      },\n    }).then((res) => {\n      const datasets = this.tranformRecords(res.data.records);\n      this.$emit(\"input\", datasets);\n    });\n  },\n  methods: {\n    tranformRecords(records) {\n      const _this = this;\n\n      return records.map((record) => {\n        const row = {};\n\n        Object.entries(this.fields).forEach(([field, column]) => {\n          row[column] = record.fields[field];\n        });\n\n        row.raw = record.fields;\n        row.status = this.statuses.find(\n          (s) => s.label == row[\"Statut dâ€™ouverture\"]\n        );\n        row.visible = true;\n\n        return row;\n      });\n    },\n  },\n};\n</script>\n"]}]}