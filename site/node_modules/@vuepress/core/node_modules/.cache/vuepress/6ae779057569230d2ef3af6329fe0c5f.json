{"remainingRequest":"/home/geof/projects/refonte-schema/schema.data.gouv.fr/site/node_modules/babel-loader/lib/index.js??ref--3-1!/home/geof/projects/refonte-schema/schema.data.gouv.fr/site/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/geof/projects/refonte-schema/schema.data.gouv.fr/site/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/geof/projects/refonte-schema/schema.data.gouv.fr/site/site/.vuepress/theme/global-components/SchemaCards.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/geof/projects/refonte-schema/schema.data.gouv.fr/site/site/.vuepress/theme/global-components/SchemaCards.vue","mtime":1628256701646},{"path":"/home/geof/projects/refonte-schema/schema.data.gouv.fr/site/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/geof/projects/refonte-schema/schema.data.gouv.fr/site/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/geof/projects/refonte-schema/schema.data.gouv.fr/site/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/geof/projects/refonte-schema/schema.data.gouv.fr/site/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgbGF0aW5pemUgZnJvbSAnbGF0aW5pemUnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlNjaGVtYUNhcmRzIiwKICBwcm9wczogWydvcHRpb24nXSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2VhcmNoVGV4dDogJycsCiAgICAgIG1lc3NhZ2VTY2hlbWE6ICcnLAogICAgICBzY2hlbWFzOiBudWxsLAogICAgICBzY2hlbWFzVG9TaG93OiBudWxsLAogICAgICBzdGF0czogbnVsbAogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgZGF0YVNjaGVtYXMgPSByZXF1aXJlKCcuLi8uLi9wdWJsaWMvc2NoZW1hcy5qc29uJyk7CgogICAgdGhpcy5zY2hlbWFzID0gZGF0YVNjaGVtYXMuc2NoZW1hczsKICAgIHRoaXMuc2NoZW1hc1RvU2hvdyA9IGRhdGFTY2hlbWFzLnNjaGVtYXM7CgogICAgdmFyIHN0YXRzU2NoZW1hcyA9IHJlcXVpcmUoJy4uLy4uL3B1YmxpYy9zdGF0cy5qc29uJyk7CgogICAgdGhpcy5zdGF0cyA9IHN0YXRzU2NoZW1hczsKICB9LAogIG1ldGhvZHM6IHsKICAgIHRydW5jYXRlVGV4dDogZnVuY3Rpb24gdHJ1bmNhdGVUZXh0KGRlc2MsIGxlbmd0aCkgewogICAgICBpZiAoZGVzYy5sZW5ndGggPiBsZW5ndGgpIHsKICAgICAgICByZXR1cm4gZGVzYy5zbGljZSgwLCBsZW5ndGgpICsgJyBbLi4uXSc7CiAgICAgIH0KCiAgICAgIHJldHVybiBkZXNjOwogICAgfSwKICAgICJnb3RvIjogZnVuY3Rpb24gZ290byhzY2hlbWEpIHsKICAgICAgaWYgKHRoaXMub3B0aW9uICYmIHRoaXMub3B0aW9uID09ICdkZXNjcmlwdGlvbicpIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgic2NoZW1hcy8iLmNvbmNhdChzY2hlbWEubmFtZSkpOwogICAgICB9CgogICAgICBpZiAodGhpcy5vcHRpb24gJiYgdGhpcy5vcHRpb24gPT0gJ2twaXMnKSB7CiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnaHR0cHM6Ly93d3cuZGF0YS5nb3V2LmZyL2ZyL2RhdGFzZXRzLz9zY2hlbWE9JyArIHNjaGVtYS5uYW1lOwogICAgICB9CiAgICB9LAogICAgZmlsdGVyU2NoZW1hOiBmdW5jdGlvbiBmaWx0ZXJTY2hlbWEoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAodGhpcy5zZWFyY2hUZXh0ICE9PSAnJykgewogICAgICAgIHZhciBvYmogPSBbXTsKICAgICAgICB0aGlzLnNjaGVtYXMuZm9yRWFjaChmdW5jdGlvbiAoc2NoZW1hKSB7CiAgICAgICAgICBpZiAobGF0aW5pemUoc2NoZW1hLnRpdGxlLnRvTG93ZXJDYXNlKCkpLmluY2x1ZGVzKGxhdGluaXplKF90aGlzLnNlYXJjaFRleHQudG9Mb3dlckNhc2UoKSkpKSB7CiAgICAgICAgICAgIG9iai5wdXNoKHNjaGVtYSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5zY2hlbWFzVG9TaG93ID0gb2JqOwoKICAgICAgICBpZiAodGhpcy5zY2hlbWFzVG9TaG93Lmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgdGhpcy5tZXNzYWdlU2NoZW1hID0gJ0F1Y3VuIHNjaMOpbWEgdHJvdXbDqSc7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc2NoZW1hc1RvU2hvdyA9IHRoaXMuc2NoZW1hczsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"sources":["SchemaCards.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA,OAAA,QAAA,MAAA,UAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,aADA;AAEA,EAAA,KAAA,EAAA,CACA,QADA,CAFA;AAKA,EAAA,IALA,kBAKA;AACA,WAAA;AACA,MAAA,UAAA,EAAA,EADA;AAEA,MAAA,aAAA,EAAA,EAFA;AAGA,MAAA,OAAA,EAAA,IAHA;AAIA,MAAA,aAAA,EAAA,IAJA;AAKA,MAAA,KAAA,EAAA;AALA,KAAA;AAOA,GAbA;AAcA,EAAA,OAdA,qBAcA;AACA,QAAA,WAAA,GAAA,OAAA,CAAA,2BAAA,CAAA;;AACA,SAAA,OAAA,GAAA,WAAA,CAAA,OAAA;AACA,SAAA,aAAA,GAAA,WAAA,CAAA,OAAA;;AACA,QAAA,YAAA,GAAA,OAAA,CAAA,yBAAA,CAAA;;AACA,SAAA,KAAA,GAAA,YAAA;AACA,GApBA;AAqBA,EAAA,OAAA,EAAA;AACA,IAAA,YADA,wBACA,IADA,EACA,MADA,EACA;AACA,UAAA,IAAA,CAAA,MAAA,GAAA,MAAA,EAAA;AACA,eAAA,IAAA,CAAA,KAAA,CAAA,CAAA,EAAA,MAAA,IAAA,QAAA;AACA;;AACA,aAAA,IAAA;AACA,KANA;AAAA,0BAOA,MAPA,EAOA;AACA,UAAA,KAAA,MAAA,IAAA,KAAA,MAAA,IAAA,aAAA,EAAA;AACA,aAAA,OAAA,CAAA,IAAA,mBAAA,MAAA,CAAA,IAAA;AACA;;AACA,UAAA,KAAA,MAAA,IAAA,KAAA,MAAA,IAAA,MAAA,EAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,IAAA,GAAA,kDAAA,MAAA,CAAA,IAAA;AACA;AACA,KAdA;AAeA,IAAA,YAfA,0BAeA;AAAA;;AACA,UAAA,KAAA,UAAA,KAAA,EAAA,EAAA;AACA,YAAA,GAAA,GAAA,EAAA;AACA,aAAA,OAAA,CAAA,OAAA,CAAA,UAAA,MAAA,EAAA;AACA,cAAA,QAAA,CAAA,MAAA,CAAA,KAAA,CAAA,WAAA,EAAA,CAAA,CAAA,QAAA,CAAA,QAAA,CAAA,KAAA,CAAA,UAAA,CAAA,WAAA,EAAA,CAAA,CAAA,EAAA;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,MAAA;AACA;AACA,SAJA;AAKA,aAAA,aAAA,GAAA,GAAA;;AACA,YAAA,KAAA,aAAA,CAAA,MAAA,KAAA,CAAA,EAAA;AACA,eAAA,aAAA,GAAA,qBAAA;AACA;AACA,OAXA,MAWA;AACA,aAAA,aAAA,GAAA,KAAA,OAAA;AACA;AACA;AA9BA;AArBA,CAAA","sourcesContent":["<template>\n  <div>\n    <div id=\"search-bar\" class=\"rf-container rf-pb-6w rf-pt-2w\">\n        <!--<br />\n        <p>\n            Les types de jeux de données ci-dessous sont issues du référentiel de schéma de\n            la plateforme schema.data.gouv.fr.\n        </p>-->\n        <br />\n        <div class=\"search-bar\" id=\"header-search\">\n            <input\n                v-model=\"searchText\"\n                v-on:input=\"filterSchema()\"\n                class=\"rf-input\"\n                placeholder=\"Rechercher un type de jeu de données\"\n                type=\"search\" id=\"header-search-input\"\n                name=\"header-search-input\"\n            >\n        </div>\n    </div>\n    <div class=\"boxes\">\n      <div\n          class=\"box style-schema\"\n          v-for=\"schema in schemasToShow\"\n          :key=\"schema.name\"\n          @click=\"goto(schema)\"\n      >\n          <div style=\"color: black;\" class=\"box-header\">\n              {{ truncateText(schema.title,75) }}\n          </div>\n          <div v-if=\"option == 'description'\">\n            <div style=\"color: black;\" class=\"box-content2\">{{ truncateText(schema.description,100) }}</div>\n            <div style=\"float: right\"><img src=\"../../public/assets/right-arrow.png\" width=\"20\" /></div>\n            {{ messageSchema }}\n          </div>\n          <div v-if=\"stats && option == 'kpis'\">\n             <br />\n             <div style=\"color: black;\" class=\"box-content\">{{ stats[schema.name] }} ressources sur data.gouv.fr</div>\n              <div style=\"float: right\"><img src=\"../../public/assets/right-arrow.png\" width=\"20\" /></div>\n          </div>\n      </div>\n  </div>\n  </div>\n</template>\n\n<script>\n\nimport latinize from 'latinize';\n\nexport default {\n  name: \"SchemaCards\",\n  props: [\n    'option'\n  ],\n  data(){\n    return{\n      searchText: '',\n      messageSchema: '',\n      schemas: null,\n      schemasToShow: null,\n      stats: null,\n    };\n  },\n  mounted() {\n    var dataSchemas = require('../../public/schemas.json')\n    this.schemas = dataSchemas.schemas\n    this.schemasToShow = dataSchemas.schemas\n    var statsSchemas = require('../../public/stats.json')\n    this.stats = statsSchemas\n  },\n  methods: {\n    truncateText(desc,length){\n      if (desc.length > length) {\n          return desc.slice(0,length)+' [...]';\n      } \n      return desc;\n    },\n    goto(schema) {\n      if(this.option && this.option == 'description') {\n        this.$router.push(`schemas/${schema.name}`);\n      }\n      if(this.option && this.option == 'kpis') {\n        window.location.href = 'https://www.data.gouv.fr/fr/datasets/?schema='+schema.name\n      }\n    },\n    filterSchema() {\n      if (this.searchText !== '') {\n        const obj = [];\n        this.schemas.forEach((schema) => {\n          if (latinize(schema.title.toLowerCase()).includes(latinize(this.searchText.toLowerCase()))) {\n            obj.push(schema);\n          }\n        });\n        this.schemasToShow = obj;\n        if (this.schemasToShow.length === 0) {\n          this.messageSchema = 'Aucun schéma trouvé';\n        }\n      } else {\n        this.schemasToShow = this.schemas;\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n\n.boxes{\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: center;\n}\n\n.box{\n  margin-top: 20px;\n  margin-bottom: 20px;\n  margin-right: 10px;\n  margin-left: 10px;\n  padding: 20px;\n  vertical-align: middle;\n  width: 350px;\n  cursor: pointer;\n  font-weight: bold;\n}\n\n\n\n.style-schema{\n  background-color: #f9f8f6;\n  color: #666666;\n}\n\n.style-schema:hover{\n background-color: #e0dbd0; \n}\n\n.box-header{\n  width: 100%;\n  padding-bottom: 30px;\n  float: left;\n  text-align: left;\n  font-size: 18px;\n  min-height: 100px;\n}\n\n.box-content{\n  width: 100%;\n  min-height: 200px;\n  text-align: left;\n  padding-top: 10px;\n  font-size: 14px;\n  font-weight: normal;\n}\n\n.box-content{\n  width: 100%;\n  min-height: 130px;\n  text-align: left;\n  padding-top: 10px;\n  font-size: 18px;\n  font-weight: normal;\n}\n\n\n.rf-input{\n  width: 100%;\n  height: 40px;\n  background-color: #ebebeb;\n  border: 0px;\n  padding: 10px;\n  font-size: 18px;\n  border-bottom: 2px solid #0000B7;\n}\n</style>"],"sourceRoot":"site/.vuepress/theme/global-components"}]}